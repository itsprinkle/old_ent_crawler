package generator

import "fmt"

// 响应器
type Responser interface {
	Success()
	Fail()
}

// 迭代器
type Iterator interface {
	Next() string
	Done() bool
}

// 生成器
type Generator interface {
	Responser
	Iterator
}

// 行生成器
// 每次读一行
func GetLine(filepath string) (Generator, error) {
	gen, err := NewLine(filepath)
	if err != nil {
		return nil, err
	}
	gen.Do()
	return gen, nil
}

func MustGetLine(filepath string) Generator {
	gen, err := GetLine(filepath)
	if err != nil {
		panic(err)
	}
	return gen
}

// 15位工商注册号生成器
func Get15(name, prefix string, count int) (Generator, error) {
	gen := NewRegNo15()
	var types []string
	switch name {
	case "heilongjiang":
		types = []string{"0000", "0010", "1000", "1001", "1002", "1003", "1010", "1011", "1030", "1100", "4000", "4010", "5000", "5010", "6000", "6001", "6002", "6003", "6004", "6005", "6006", "6007", "6008", "6009", "6010", "6011", "6012", "6013", "NA00", "NA10", "NB00"}
	case "zhejiang":
		//types = []string{"0", "1", "4", "5", "60", "61", "62", "63", "64", "65", "66", "67", "68", "69", "NA", "NB"}
		types = []string{"000", "080", "100", "101", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "212", "213", "214", "300", "305", "307", "310", "311", "312", "400", "500", "600", "601", "602", "603", "604", "605", "606", "607", "608", "609", "610", "611", "612", "613", "614", "615", "616", "617", "618", "619", "620", "621", "622", "623", "624", "625", "627", "630", "631", "635", "637", "640", "641", "642", "643", "644", "645", "646", "650", "651", "652", "653", "655", "660", "661", "664", "669", "670", "676", "680", "681", "682", "683", "684", "685", "686", "688", "689", "690", "691", "692", "693", "694", "695", "696", "698", "699", "700", "701", "702", "711", "800", "842", "900", "NA0", "NB0"}
	case "neimenggu":
		types = []string{"000", "001", "020", "060", "100", "103", "120", "150", "170", "200", "207", "210", "251", "253", "260", "267", "300", "301", "305", "308", "330", "340", "343", "400", "500", "531", "590", "591", "600", "603", "615", "620", "650", "B00", "N00", "NA0", "NB0"}
	case "guangdong":
		types = []string{"000", "001", "002", "102", "103", "104", "105", "106", "107", "108", "109", "111", "112", "113", "114", "200", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "312", "313", "314", "315", "316", "317", "318", "319", "320", "321", "322", "323", "324", "325", "326", "327", "328", "329", "330", "331", "332", "333", "334", "335", "336", "337", "339", "341", "343", "344", "346", "349", "352", "353", "354", "355", "357", "359", "361", "362", "363", "364", "380", "400", "500", "501", "503", "504", "506", "600", "601", "602", "603", "604", "605", "606", "607", "608", "NA0", "NB0"}
	case "shanghai":
		types = []string{"0", "4", "5", "6", "NA", "NB"}
	case "tianjin":
		types = []string{"00", "40", "60", "NA"}
	case "shandong":
		types = []string{"000", "018", "020", "028", "080", "100", "118", "119", "120", "129", "170", "180", "200", "210", "218", "220", "228", "229", "230", "280", "290", "300", "310", "319", "320", "329", "330", "380", "390", "400", "410", "500", "505", "509", "553", "600", "NA0", "NA1", "NA2", "NB0"}
	case "hunan":
		types = []string{"00", "10", "20", "30", "40", "50", "60", "NA"}
	case "guangxi":
		types = []string{"00", "10", "20", "30", "40", "50", "60", "NA", "NB"}
	case "hubei":
		//types = []string{"000", "100", "010", "020", "200", "210", "230", "300", "400", "500", "600", "601", "700", "800", "880", "NA0"}
		types = []string{"000", "001", "010", "012", "013", "020", "021", "024", "100", "110", "121", "122", "131", "132", "180", "200", "210", "213", "220", "230", "330", "400", "500", "514", "600", "700", "880", "NA0", "NA1", "NA2", "NB0"}
	case "xizang":
		types = []string{"000", "100", "160", "200", "210", "280", "400", "500", "600", "700", "800", "810", "900", "NA0"}
	case "shanxi":
		types = []string{"000", "005", "010", "060", "061", "065", "080", "092", "100", "103", "105", "106", "109", "110", "120", "160", "200", "201", "202", "204", "205", "206", "207", "208", "209", "210", "220", "230", "240", "250", "260", "261", "270", "300", "301", "310", "320", "330", "340", "350", "360", "380", "400", "500", "600", "601", "602", "604", "605", "606", "608", "610", "620", "630", "640", "650", "660", "661", "670", "680", "690", "NA0", "NA5", "NA6"}
	case "beijing":
		types = []string{"000", "001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "011", "012", "013", "014", "015", "016", "017", "018", "019", "020", "021", "022", "400", "410", "419", "420", "430", "440", "450", "600", "601", "602", "603", "604", "605", "NA", "NB"}
	case "anhui":
		types = []string{"000", "001", "250", "400", "500", "600", "NA0", "NA1", "NB0"}
	case "hainan":
		types = []string{"0", "4", "5", "6", "NA", "NB"}
	case "yunnan":
		types = []string{"000", "100", "200", "300", "400", "600", "650", "NA0"}
	case "hebei":
		types = []string{"000", "002", "004", "031", "040", "060", "080", "100", "140", "180", "200", "202", "204", "280", "300", "302", "304", "310", "340", "360", "380", "400", "440", "500", "540", "560", "600", "601", "603", "608", "610", "620", "633", "641", "651", "660", "663", "670", "682", "690", "693", "694", "900", "NA0"}
	case "qinghai":
		types = []string{"000", "001", "002", "009", "010", "012", "019", "020", "029", "030", "031", "050", "060", "063", "068", "070", "090", "096", "100", "101", "102", "108", "109", "110", "112", "120", "131", "200", "201", "202", "209", "210", "219", "220", "230", "250", "259", "260", "269", "300", "301", "302", "309", "310", "319", "320", "329", "400", "410", "500", "510", "600", "610", "614", "616", "620", "630", "640", "650", "660", "663", "670", "680", "690", "699", "NA0", "NA2", "NA5", "NB0"}
		//types = []string{"000", "001", "002", "009", "010", "019", "020", "029", "030", "031", "060", "063", "070", "090", "100", "101", "102", "109", "110", "200", "300", "500", "510", "600", "NA0"}
	case "jilin":
		types = []string{"000", "001", "002", "003", "010", "020", "030", "040", "050", "060", "100", "200", "201", "203", "300", "303", "400", "500", "600", "603", "610", "NA0", "NB0"}
	case "fujian":
		types = []string{"000", "001", "002", "080", "100", "180", "200", "280", "310", "320", "380", "400", "410", "490", "500", "600", "601", "603", "610", "630", "640", "660", "708", "710", "720", "730", "740", "750", "800", "801", "802", "804", "805", "806", "807", "808", "809", "810", "811", "820", "830", "840", "850", "860", "NA0"}
	case "jiangsu":
		types = []string{"000", "400", "500", "590", "600", "601", "602", "NA0", "NB0"}
	case "xianxi":
		//types = []string{"0", "1", "2", "3", "4", "5", "60", "NA", "NB"}
		types = []string{"000", "100", "107", "199", "200", "300", "307", "400", "500", "510", "600", "601", "602", "603", "604", "605", "606", "607", "610", "614", "615", "620", "622", "625", "630", "634", "635", "638", "640", "642", "645", "646", "650", "655", "660", "665", "667", "670", "675", "680", "690", "699", "NA0", "NB0"}
	case "xinjiang":
		types = []string{"00", "03", "05", "08", "10", "13", "15", "27", "60", "61", "62", "63", "64", "65", "66", "67", "68", "80", "NA"}
	case "chongqing":
		//types = []string{"000", "001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "100", "101", "151", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "220", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "320", "400", "401", "402", "403", "500", "501", "502", "503", "600", "601", "602", "603", "604", "605", "606", "607", "608", "700", "701", "702", "703", "704", "705", "706", "707", "708", "901", "NA0", "NA1", "NA2", "NA3", "NA4", "NA5", "NA6", "NA7", "NA8", "NA9", "NB0"}
		types = []string{"0000", "0001", "0002", "0003", "0004", "0005", "0006", "0007", "0008", "0009", "0010", "0011", "0012", "0013", "0014", "0016", "0017", "0018", "0019", "0021", "0022", "0023", "0024", "0025", "0026", "0027", "0029", "0030", "0031", "0032", "0033", "0034", "0035", "0037", "0040", "0041", "0043", "0044", "0046", "0047", "0048", "0049", "0050", "0051", "0052", "0054", "0055", "0058", "0059", "0060", "0062", "0063", "0064", "0065", "0066", "0067", "0068", "0069", "0070", "0071", "0073", "0074", "0075", "0076", "0077", "0078", "0079", "0080", "0081", "0082", "0083", "0084", "0085", "0086", "0087", "0088", "0089", "0090", "0091", "0101", "1000", "1010", "1510", "2000", "2001", "2002", "2003", "2005", "2007", "2009", "2010", "2011", "2013", "2015", "2016", "2018", "2021", "2022", "2023", "2029", "2030", "2031", "2032", "2039", "2040", "2041", "2044", "2045", "2046", "2047", "2048", "2050", "2051", "2052", "2053", "2054", "2057", "2058", "2059", "2061", "2062", "2063", "2064", "2065", "2066", "2067", "2068", "2069", "2070", "2071", "2072", "2073", "2074", "2075", "2076", "2077", "2078", "2079", "2080", "2081", "2082", "2083", "2084", "2085", "2086", "2087", "2088", "2089", "2090", "2091", "2092", "2093", "2094", "2095", "2096", "2097", "2098", "2099", "2100", "2101", "2102", "2103", "2104", "2106", "2109", "2110", "2111", "2115", "2116", "2117", "2118", "2119", "2120", "2121", "2122", "2123", "2124", "2125", "2126", "2127", "2128", "2129", "2130", "2131", "3000", "3001", "3008", "3092", "3110", "3111", "3112", "4000", "4034", "5000", "5034", "6000", "6001", "6002", "6003", "6004", "6005", "6006", "6007", "6008", "6009", "6010", "6011", "6012", "6013", "6014", "6015", "6016", "6017", "6018", "6019", "6020", "6021", "6022", "6023", "6024", "6025", "6026", "6027", "6028", "6029", "6030", "6031", "6032", "6033", "6034", "6035", "6036", "6037", "6038", "6039", "6040", "6041", "6042", "6043", "6044", "6045", "6046", "6047", "6048", "6049", "6050", "6051", "6052", "6053", "6054", "6055", "6056", "6057", "6058", "6059", "6060", "6061", "6062", "6063", "6064", "6065", "6066", "6067", "6068", "6069", "6070", "6071", "6072", "6073", "6074", "6075", "6076", "6077", "6078", "6079", "6080", "6081", "6082", "6083", "6084", "6085", "6086", "6087", "6088", "6089", "7000", "7001", "7002", "7003", "7004", "7005", "7009", "7015", "7016", "7017", "7021", "7048", "7049", "7052", "7054", "7058", "7059", "7060", "7062", "7063", "7065", "7068", "7070", "7073", "7079", "7080", "7081", "7082", "NA00", "NA01", "NB00"}
		//types = []string{"0", "1", "2", "3", "4", "5", "6", "7", "NA", "NB"}
		//types = []string{"000", "001", "002", "003", "004", "005", "006", "007", "008", "009", "100", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "400", "401", "402", "403", "500", "501", "502", "503", "600", "601", "602", "603", "604", "605", "606", "607", "608", "700", "701", "707", "800", "900", "NA0", "NA1", "NA2", "NA3", "NA4", "NA8", "NA9", "NB0"}
		//types = []string{"000", "001", "002", "003", "004", "005", "006", "007", "008", "009", "010", "100", "101", "151", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "220", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "320", "400", "401", "402", "403", "500", "501", "502", "503", "600", "601", "602", "603", "604", "605", "606", "607", "608", "700", "701", "702", "703", "704", "705", "706", "707", "708", "901", "NA0", "NA2", "NA3", "NA5", "NA6", "NA7", "NA8", "NA9", "NB0"}
	case "sichuan":
		//types = []string{"000", "001", "005", "100", "200", "201", "300", "400", "500", "571", "600", "601", "602", "619", "640", "692", "800", "900", "NA0", "NB0"}
		types = []string{"0", "1", "4", "5", "6", "NA"}
	case "tianyan":
		fallthrough
	case "liaoning":
		types = []string{"0000", "0001", "0002", "0003", "0004", "0005", "0006", "0010", "0020", "0030", "0031", "0035", "0040", "0041", "0042", "0045", "0049", "0050", "0051", "0052", "0061", "0070", "0091", "0092", "0164", "0240", "0670", "1000", "1100", "2002", "2200", "2201", "2202", "3002", "3020", "3025", "4000", "4010", "4020", "4030", "4040", "4050", "4060", "5000", "5002", "5010", "5020", "5030", "5040", "5205", "5701", "5806", "6000", "6001", "6002", "6003", "6004", "6005", "6006", "6007", "6008", "6009", "6010", "6011", "6012", "6013", "6015", "6016", "6018", "6020", "6021", "6022", "6023", "6024", "6025", "6026", "6027", "6028", "6029", "6030", "6031", "6032", "6033", "6034", "6035", "6036", "6039", "6040", "6041", "6042", "6043", "6044", "6045", "6046", "6047", "6048", "6049", "6050", "6051", "6052", "6053", "6054", "6057", "6058", "6060", "6061", "6063", "6066", "6069", "6070", "6080", "6081", "6082", "6083", "6111", "6140", "6505", "6509", "7809", "NA00", "NA01", "NA06", "NB00"}
	case "guizhou":
		//types = []string{"000", "001", "400", "600", "601", "NA0", "NB0"}
		types = []string{"000", "001", "010", "400", "600", "601", "900", "NA0", "NB0"}
	case "ningxia":
		types = []string{"000", "100", "200", "300", "400", "500", "600", "700", "800", "NA0", "NB0"}
	case "jiangxi":
		types = []string{"010", "020", "021", "022", "023", "029", "100", "110", "119", "120", "128", "129", "200", "210", "212", "219", "220", "221", "222", "228", "229", "310", "320", "510", "520", "530", "600", "610", "NA0", "NA1", "NB0"}
	case "henan":
		types = []string{"000", "100", "200", "300", "400", "500", "510", "600", "NA0", "601", "602", "603", "604", "605", "607", "699", "611", "190", "010", "020", "030", "210", "220", "310", "340", "614", "606", "608", "609", "610", "612", "615", "613", "619", "620", "622", "625", "618", "616", "110", "617", "629", "NA1", "050", "290", "120", "013", "312", "326", "228", "328", "280", "314", "631", "932", "011", "628", "229", "630", "640", "650", "660", "670", "675", "690", "316", "008", "017", "732", "934", "320", "330", "636", "302", "111", "313", "800", "380", "621", "623", "624", "633", "635", "208", "634", "001", "101", "102", "123", "301", "112", "104", "105", "130", "311", "NA2", "830", "222", "626", "627", "681", "664", "641", "642", "390", "090", "005"}
	case "gansu":
		types = []string{"000", "010", "013", "020", "050", "100", "101", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "212", "213", "214", "283", "290", "300", "301", "305", "307", "310", "311", "312", "351", "400", "460", "480", "500", "501", "531", "560", "600", "620", "660", "681", "690", "700", "710", "720", "730", "760", "780", "781", "791", "820", "NA", "NB"}
	default:
		types = []string{"0", "4", "6", "NA"}
		return nil, fmt.Errorf("没有发现类型%v", name)
	}
	gen.Prefix(prefix).Count(count).Types(types).Do()
	return gen, nil
}

func MustGet15(name, prefix string, count int) Generator {
	gen, err := Get15(name, prefix, count)
	if err != nil {
		panic(err)
	}
	return gen
}

func MustGetMysql() Generator {
	gen, err := NewMysql()
	if err != nil {
		panic(err)
	}
	gen.Do()
	return gen
}
